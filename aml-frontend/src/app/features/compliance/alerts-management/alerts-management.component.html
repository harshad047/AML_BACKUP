    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>Alert Management</h1>
            <button class="btn btn-secondary" routerLink="/compliance">
              <i class="fas fa-arrow-left me-2"></i>
              Back to Dashboard
            </button>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="row mb-4 filters-bar align-items-center g-2">
        <div class="col-md-3">
          <select class="form-select" [(ngModel)]="statusFilter" (change)="applyFilters()">
            <option value="">All Statuses</option>
            <option value="OPEN">Open</option>
            <option value="ESCALATED">Escalated</option>
            <option value="RESOLVED">Resolved</option>
          </select>
        </div>
        <div class="col-md-3">
          <select class="form-select" [(ngModel)]="riskFilter" (change)="applyFilters()">
            <option value="">All Risk Levels</option>
            <option value="high">High Risk (80+)</option>
            <option value="medium">Medium Risk (60-79)</option>
            <option value="low">Low Risk (<60)</option>
          </select>
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control" placeholder="Search alerts..." 
                 [(ngModel)]="searchTerm" (input)="applyFilters()">
        </div>
        <div class="col-md-2">
          <button class="btn btn-primary w-100" (click)="loadAlerts()">
            <i class="fas fa-sync-alt me-2"></i>
            Refresh
          </button>
        </div>
      </div>

      <!-- Loading State -->
      <div class="row" *ngIf="loading">
        <div class="col-12 text-center">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p class="mt-2">Loading alerts...</p>
        </div>
      </div>

      <!-- Error State -->
      <div class="row" *ngIf="error && !loading">
        <div class="col-12">
          <div class="alert alert-danger" role="alert">
            <i class="fas fa-exclamation-triangle me-2"></i>
            {{ error }}
          </div>
        </div>
      </div>

      <!-- Alerts Table -->
      <div class="row" *ngIf="!loading">
        <div class="col-12">
          <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center py-3">
              <h5 class="mb-0">Alerts ({{ filteredAlerts.length }})</h5>
              <div class="d-flex align-items-center gap-3">
                <div class="d-flex align-items-center gap-2">
                  <label class="form-label mb-0 text-white">Show:</label>
                  <select class="form-select form-select-sm pagination-select" 
                          [(ngModel)]="itemsPerPage" 
                          (ngModelChange)="changeItemsPerPage()">
                    <option [ngValue]="5">5</option>
                    <option [ngValue]="10">10</option>
                    <option [ngValue]="25">25</option>
                    <option [ngValue]="50">50</option>
                  </select>
                </div>
                <span class="text-white small fw-normal">
                  Showing {{ getStartItem() }}-{{ getEndItem() }} of {{ filteredAlerts.length }} alerts
                </span>
              </div>
            </div>
            <div class="card-body p-0">
              <div class="table-responsive">
                <table class="table table-hover modern-table mb-0">
                  <thead class="table-light">
                    <tr>
                      <th>Alert ID</th>
                      <th>Reason</th>
                      <th>Risk Score</th>
                      <th>Status</th>
                      <th>Created</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngIf="paginatedAlerts.length === 0">
                      <td colspan="6" class="text-center py-4 text-muted">
                        No alerts found matching your criteria
                      </td>
                    </tr>
                    <tr *ngFor="let alert of paginatedAlerts" 
                        [class]="getAlertRowClass(alert.riskScore)">
                      <td>
                        <strong>{{ alert.id }}</strong>
                      </td>
                      <td>
                        <span class="text-truncate d-inline-block" style="max-width: 200px;" 
                              [title]="alert.reason">
                          {{ alert.reason }}
                        </span>
                      </td>
                      <td>
                        <span class="risk-chip" [ngClass]="getRiskScoreClass(alert.riskScore)">
                          {{ alert.riskScore }}
                        </span>
                      </td>
                      <td>
                        <span class="status-chip" [ngClass]="getStatusClass(alert.status)">
                          {{ alert.status }}
                        </span>
                      </td>
                      <td>
                        <small>{{ alert.createdAt | date:'short' }}</small>
                      </td>
                      <td>
                        <div class="d-flex gap-2" *ngIf="alert.status === 'OPEN'">
                          <button class="btn btn-sm btn-info" 
                                  (click)="viewAlertDetails(alert)"
                                  title="View alert details">
                            <i class="fas fa-eye me-1"></i>
                            View
                          </button>
                          <button class="btn btn-sm btn-warning" 
                                  (click)="escalateToCase(alert.id)"
                                  title="Create investigation case">
                            <i class="fas fa-search me-1"></i>
                            Investigate
                          </button>
                        </div>
                        <span *ngIf="alert.status !== 'OPEN'" class="text-muted small">
                          <i class="fas fa-check-circle me-1"></i>
                          {{ alert.status === 'ESCALATED' ? 'Under Investigation' : 'Resolved' }}
                        </span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Pagination Controls -->
      <div class="row" *ngIf="!loading && filteredAlerts.length > itemsPerPage">
        <div class="col-12">
          <nav aria-label="Alerts pagination">
            <ul class="pagination justify-content-center">
              <!-- Previous Button -->
              <li class="page-item" [class.disabled]="currentPage === 1">
                <a class="page-link" href="#" (click)="previousPage(); $event.preventDefault()" 
                   aria-label="Previous">
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>

              <!-- Page Numbers -->
              <li class="page-item" *ngFor="let page of pages" 
                  [class.active]="page === currentPage">
                <a class="page-link" href="#" (click)="goToPage(page); $event.preventDefault()">
                  {{ page }}
                </a>
              </li>

              <!-- Next Button -->
              <li class="page-item" [class.disabled]="currentPage === totalPages">
                <a class="page-link" href="#" (click)="nextPage(); $event.preventDefault()" 
                   aria-label="Next">
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </div>

      <!-- Alert Details Modal -->
      <div class="modal fade" id="alertDetailsModal" tabindex="-1" *ngIf="selectedAlert">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Alert {{ selectedAlert.id }} Details</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="col-md-6">
                  <h6>Alert Information</h6>
                  <p><strong>ID:</strong> {{ selectedAlert.id }}</p>
                  <p><strong>Reason:</strong> {{ selectedAlert.reason }}</p>
                  <p><strong>Risk Score:</strong> 
                    <span class="badge" [ngClass]="getRiskScoreClass(selectedAlert.riskScore)">
                      {{ selectedAlert.riskScore }}
                    </span>
                  </p>
                  <p><strong>Status:</strong> 
                    <span class="badge" [ngClass]="getStatusClass(selectedAlert.status)">
                      {{ selectedAlert.status }}
                    </span>
                  </p>
                  <p><strong>Created:</strong> {{ selectedAlert.createdAt | date:'medium' }}</p>
                </div>
                <div class="col-md-6" *ngIf="selectedAlert.transaction">
                  <h6>Transaction Details</h6>
                  <p><strong>Type:</strong> {{ selectedAlert.transaction.transactionType }}</p>
                  <p><strong>Amount:</strong> {{ selectedAlert.transaction.amount | currency:selectedAlert.transaction.currency }}</p>
                  <p><strong>From:</strong> {{ selectedAlert.transaction.fromAccountNumber || 'N/A' }}</p>
                  <p><strong>To:</strong> {{ selectedAlert.transaction.toAccountNumber || 'N/A' }}</p>
                  <p><strong>Status:</strong> {{ selectedAlert.transaction.status }}</p>
                  <p><strong>Description:</strong> {{ selectedAlert.transaction.description || 'N/A' }}</p>
                </div>
              </div>
              
              <!-- Obstructed Rules -->
              <div class="mt-3" *ngIf="selectedAlert.transaction && selectedAlert.transaction.obstructedRules && selectedAlert.transaction.obstructedRules.length > 0">
                <h6>Triggered Rules</h6>
                <div class="table-responsive">
                  <table class="table table-sm">
                    <thead>
                      <tr>
                        <th>Rule</th>
                        <th>Action</th>
                        <th>Risk Weight</th>
                        <th>Details</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let rule of selectedAlert.transaction.obstructedRules">
                        <td>{{ rule.ruleName }}</td>
                        <td>
                          <span class="badge" [ngClass]="rule.action === 'BLOCK' ? 'bg-danger' : 'bg-warning'">
                            {{ rule.action }}
                          </span>
                        </td>
                        <td>{{ rule.riskWeight }}</td>
                        <td>{{ rule.details }}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="button" class="btn btn-warning" 
                      (click)="escalateToCase(selectedAlert.id)"
                      [disabled]="selectedAlert.status !== 'OPEN'">
                Escalate to Case
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Escalate Confirmation Modal -->
      <div class="modal fade" [class.show]="showEscalateModal" [style.display]="showEscalateModal ? 'block' : 'none'" 
           tabindex="-1" role="dialog" aria-labelledby="escalateModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header border-0">
              <h5 class="modal-title fw-bold" id="escalateModalLabel">
                <i class="fas fa-search text-warning me-2"></i>
                Escalate to Investigation
              </h5>
              <button type="button" class="btn-close" (click)="cancelEscalate()" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p class="mb-0">Are you sure you want to escalate this alert to a case for investigation?</p>
              <div class="alert alert-info mt-3 mb-0">
                <i class="fas fa-info-circle me-2"></i>
                <small>This will create a new investigation case and change the alert status to <strong>ESCALATED</strong>.</small>
              </div>
            </div>
            <div class="modal-footer border-0">
              <button type="button" class="btn btn-secondary" (click)="cancelEscalate()">
                <i class="fas fa-times me-1"></i>Cancel
              </button>
              <button type="button" class="btn btn-warning" (click)="confirmEscalate()">
                <i class="fas fa-search me-1"></i>Escalate to Case
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Backdrop -->
      <div class="modal-backdrop fade" [class.show]="showEscalateModal" *ngIf="showEscalateModal"></div>
    </div>
