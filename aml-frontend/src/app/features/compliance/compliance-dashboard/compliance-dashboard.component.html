    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <h1 class="mb-4">Compliance Dashboard</h1>
          <p class="text-muted">Welcome back, {{ currentUser?.firstName }}!</p>
        </div>
      </div>

      <!-- Loading State (Skeletons) -->
      <div class="row mb-4" *ngIf="loading">
        <div class="col-md-3 col-sm-6 mb-3" *ngFor="let i of [1,2,3,4]">
          <div class="stat-card skeleton">
            <div class="stat-icon"></div>
            <div class="w-100">
              <div class="skeleton-line w-50 mb-2"></div>
              <div class="skeleton-line w-25"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Error State -->
      <div class="row mb-4" *ngIf="error && !loading">
        <div class="col-12">
          <div class="alert alert-danger" role="alert">
            <i class="fas fa-exclamation-triangle me-2"></i>
            {{ error }}
          </div>
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="row mb-4" *ngIf="!loading">
        <div class="col-md-3 col-sm-6 mb-3">
          <div class="stat-card stat-warning">
            <div class="stat-icon"><i class="fas fa-bell"></i></div>
            <div class="stat-content">
              <div class="stat-label">Open Alerts</div>
              <div class="stat-number">{{ stats.openAlerts }}</div>
            </div>
            <div class="ms-auto sparkline">
              <span *ngFor="let v of trends.openAlerts" [style.height.px]="v"></span>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
          <div class="stat-card stat-danger">
            <div class="stat-icon"><i class="fas fa-briefcase"></i></div>
            <div class="stat-content">
              <div class="stat-label">Active Cases</div>
              <div class="stat-number">{{ stats.activeCases }}</div>
            </div>
            <div class="ms-auto sparkline">
              <span *ngFor="let v of trends.activeCases" [style.height.px]="v"></span>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
          <div class="stat-card stat-info">
            <div class="stat-icon"><i class="fas fa-user-check"></i></div>
            <div class="stat-content">
              <div class="stat-label">Pending Reviews</div>
              <div class="stat-number">{{ stats.pendingReviews }}</div>
            </div>
            <div class="ms-auto sparkline">
              <span *ngFor="let v of trends.pendingReviews" [style.height.px]="v"></span>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
          <div class="stat-card stat-success">
            <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
            <div class="stat-content">
              <div class="stat-label">Resolved Today</div>
              <div class="stat-number">{{ stats.resolvedToday }}</div>
            </div>
            <div class="ms-auto sparkline">
              <span *ngFor="let v of trends.resolvedToday" [style.height.px]="v"></span>
            </div>
          </div>
        </div>
      </div>

      <!-- Alerts and Cases -->
      <div class="row">
        <div class="col-md-8">
          <div class="card">
            <div class="card-header d-flex flex-wrap gap-2 justify-content-between align-items-center">
              <h5 class="mb-0">Recent Alerts</h5>
              <div class="d-flex gap-2 align-items-center ms-auto">
                <input class="form-control form-control-sm" placeholder="Search alerts..." [(ngModel)]="alertsQuery">
                <select class="form-select form-select-sm" [(ngModel)]="alertsRiskFilter">
                  <option value="">All risks</option>
                  <option value="HIGH">High</option>
                  <option value="MEDIUM">Medium</option>
                  <option value="LOW">Low</option>
                </select>
                <button class="btn btn-sm btn-outline-primary" routerLink="/compliance/alerts">View All</button>
              </div>
            </div>
            <div class="card-body">
              <div class="text-center text-muted py-4" *ngIf="recentAlerts.length === 0 && !loading">
                <i class="fas fa-exclamation-triangle fa-3x mb-3"></i>
                <p>No alerts at this time</p>
              </div>
              <div class="list-group list-group-flush" *ngIf="filteredAlerts().length > 0">
                <div class="list-group-item alert-item d-flex justify-content-between align-items-start"
                     *ngFor="let alert of filteredAlerts()">
                  <div class="alert-left">
                    <div class="alert-title">
                      <span class="id-pill">Alert #{{ alert.id }}</span>
                    </div>
                    <div class="alert-summary">{{ alert.reason }}</div>
                    <div class="alert-meta">
                      <span class="meta-item"><i class="far fa-clock me-1"></i>{{ alert.createdAt | date:'MMM d, y, h:mm a' }}</span>
                      <span class="meta-dot"></span>
                      <span class="meta-item"><i class="fas fa-shield-alt me-1"></i>Score: {{ alert.riskScore }}</span>
                    </div>
                  </div>
                  <div class="text-end alert-right">
                    <span class="risk-chip mb-2" [ngClass]="riskLevelClass(alert.riskScore)">
                      {{ riskLevelLabel(alert.riskScore) }} Â· {{ alert.riskScore }}
                    </span>
                    <div>
                      <button class="btn btn-sm btn-outline-primary" (click)="viewAlert(alert.id)">
                        Review
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="text-center text-muted py-4" *ngIf="recentAlerts.length > 0 && filteredAlerts().length === 0">
                No alerts match your filters
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card">
            <div class="card-header d-flex flex-wrap gap-2 justify-content-between align-items-center">
              <h5 class="mb-0">Active Investigations</h5>
              <div class="d-flex gap-2 align-items-center ms-auto">
                <input class="form-control form-control-sm" placeholder="Search cases..." [(ngModel)]="casesQuery">
                <select class="form-select form-select-sm" [(ngModel)]="casesStatusFilter">
                  <option value="">All statuses</option>
                  <option value="OPEN">Open</option>
                  <option value="IN_PROGRESS">In Progress</option>
                  <option value="ON_HOLD">On Hold</option>
                </select>
                <button class="btn btn-sm btn-outline-primary" routerLink="/compliance/cases">View All</button>
              </div>
            </div>
            <div class="card-body">
              <div class="text-center text-muted py-4" *ngIf="activeInvestigations.length === 0 && !loading">
                <i class="fas fa-search fa-3x mb-3"></i>
                <p>No active investigations</p>
              </div>
              <div class="list-group list-group-flush" *ngIf="filteredCases().length > 0">
                <div class="list-group-item case-item d-flex justify-content-between align-items-start"
                     *ngFor="let case of filteredCases()">
                  <div class="case-left">
                    <div class="case-title">
                      <span class="id-pill">Case #{{ case.id }}</span>
                    </div>
                    <div class="case-summary">Assigned to: <strong>{{ case.assignedTo }}</strong></div>
                    <div class="case-meta">
                      <span class="meta-item"><i class="far fa-clock me-1"></i>{{ case.createdAt | date:'MMM d, y, h:mm a' }}</span>
                    </div>
                  </div>
                  <div class="text-end case-right">
                    <span class="status-chip" [ngClass]="statusLevelClass(case.status)">{{ case.status }}</span>
                  </div>
                </div>
              </div>
              <div class="text-center text-muted py-4" *ngIf="activeInvestigations.length > 0 && filteredCases().length === 0">
                No cases match your filters
              </div>
            </div>
          </div>

          <div class="card mt-3">
            <div class="card-header">
              <h5 class="mb-0">Quick Actions</h5>
            </div>
            <div class="card-body">
              <div class="d-grid gap-2">
                <button class="btn btn-outline-danger" routerLink="/compliance/alerts">
                  <i class="fas fa-exclamation-triangle me-2"></i>
                  Review Alerts
                </button>
                <button class="btn btn-outline-info" routerLink="/compliance/transactions">
                  <i class="fas fa-exchange-alt me-2"></i>
                  Review Transactions
                </button>
                <button class="btn btn-outline-primary" routerLink="/compliance/cases">
                  <i class="fas fa-folder-open me-2"></i>
                  Manage Cases
                </button>
                <button class="btn btn-outline-success" (click)="refreshDashboard()">
                  <i class="fas fa-sync-alt me-2"></i>
                  Refresh Data
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
