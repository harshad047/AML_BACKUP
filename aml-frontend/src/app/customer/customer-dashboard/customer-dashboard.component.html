<div class="dashboard-container">
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="row align-items-center">
      <div class="col-md-8">
        <h1 class="dashboard-title">Welcome Back, {{ currentUser?.firstName }}!</h1>
        <p class="dashboard-subtitle">Manage your accounts and transactions securely</p>
      </div>
      <div class="col-md-4 text-end">
        <div class="user-info-card">
          <div class="user-avatar">{{ currentUser?.firstName?.charAt(0) }}{{ currentUser?.lastName?.charAt(0) }}</div>
          <div class="user-details">
            <div class="user-name">{{ currentUser?.firstName }} {{ currentUser?.lastName }}</div>
            <div class="user-email">{{ currentUser?.email }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="row mb-4">
    <div class="col-lg-3 col-md-6 mb-3">
      <div class="stat-card stat-card-blue">
        <div class="stat-icon">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
            <circle cx="20" cy="20" r="18" stroke="white" stroke-width="2" opacity="0.3"/>
            <path d="M20 10V20L26 26" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-label">KYC Status</div>
          <div class="stat-value">{{ kycStatus }}</div>
        </div>
      </div>
    </div>

    <div class="col-lg-3 col-md-6 mb-3">
      <div class="stat-card stat-card-green">
        <div class="stat-icon">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
            <rect x="8" y="12" width="24" height="16" rx="2" stroke="white" stroke-width="2" opacity="0.3"/>
            <path d="M8 18H32M12 22H16M20 22H24" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-label">Active Accounts</div>
          <div class="stat-value">{{ activeAccounts }}</div>
        </div>
      </div>
    </div>

    <div class="col-lg-3 col-md-6 mb-3">
      <div class="stat-card stat-card-orange">
        <div class="stat-icon">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
            <circle cx="20" cy="20" r="8" stroke="white" stroke-width="2" opacity="0.3"/>
            <path d="M20 16V20L23 23" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-label">Pending Transactions</div>
          <div class="stat-value">{{ pendingTransactions }}</div>
        </div>
      </div>
    </div>

    <div class="col-lg-3 col-md-6 mb-3">
      <div class="stat-card stat-card-purple">
        <div class="stat-icon">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
            <rect x="10" y="8" width="20" height="24" rx="2" stroke="white" stroke-width="2" opacity="0.3"/>
            <path d="M14 16H26M14 20H26M14 24H22" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-label">Documents</div>
          <div class="stat-value">{{ totalDocuments }}</div>
          <div class="stat-sub">Pending: {{ pendingDocuments }} Â· Approved: {{ approvedDocuments }}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card quick-actions-card">
        <div class="card-header">
          <h5 class="mb-0">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="white" class="me-2">
              <path d="M10 2L2 7V18H8V13H12V18H18V7L10 2Z"/>
            </svg>
            Quick Actions
          </h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-3 col-sm-6">
              <a [routerLink]="['/customer/new-transaction']" class="action-button">
                <div class="action-icon action-icon-blue">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
                <div class="action-text">New Transaction</div>
              </a>
            </div>
            <div class="col-md-3 col-sm-6">
              <a [routerLink]="['/customer/transactions']" class="action-button">
                <div class="action-icon action-icon-green">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
                <div class="action-text">View Transactions</div>
              </a>
            </div>
            <div class="col-md-3 col-sm-6">
              <a [routerLink]="['/customer/documents']" class="action-button">
                <div class="action-icon action-icon-orange">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L18.7071 8.70711C18.8946 8.89464 19 9.149 19 9.41421V19C19 20.1046 18.1046 21 17 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
                <div class="action-text">My Documents</div>
              </a>
            </div>
            <div class="col-md-3 col-sm-6">
              <a [routerLink]="['/customer/open-account']" class="action-button">
                <div class="action-icon action-icon-purple">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <rect x="3" y="8" width="18" height="12" rx="2" stroke="currentColor" stroke-width="2"/>
                    <path d="M7 8V6C7 4.89543 7.89543 4 9 4H15C16.1046 4 17 4.89543 17 6V8M12 14V16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
                <div class="action-text">Open Account</div>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content Row -->
  <div class="row">
    <!-- Recent Transactions -->
    <div class="col-lg-8 mb-4">
      <div class="card">
        <div class="card-header">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Recent Transactions</h5>
            <a [routerLink]="['/customer/transactions']" class="btn btn-sm btn-outline-light">View All</a>
          </div>
        </div>
        <div class="card-body">
          <div class="empty-state" *ngIf="recentTransactions.length === 0">
            <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
              <circle cx="40" cy="40" r="38" stroke="#e0e0e0" stroke-width="2"/>
              <path d="M30 40H50M40 30V50" stroke="#e0e0e0" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <p class="mt-3">No transactions yet</p>
            <a [routerLink]="['/customer/new-transaction']" class="btn btn-primary btn-sm">Create Your First Transaction</a>
          </div>
          
          <div class="transaction-list" *ngIf="recentTransactions.length > 0">
            <div class="transaction-item" *ngFor="let transaction of recentTransactions">
              <div class="transaction-icon">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M10 2L15 7H11V13H9V7H5L10 2Z"/>
                </svg>
              </div>
              <div class="transaction-details">
                <div class="transaction-type">{{ transaction.type }}</div>
                <div class="transaction-date">{{ transaction.date | date:'short' }}</div>
              </div>
              <div class="transaction-status">
                <span class="badge" [ngClass]="getStatusClass(transaction.status)">
                  {{ transaction.status }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Alerts & Accounts Sidebar -->
    <div class="col-lg-4 mb-4">
      <!-- Alerts Card -->
      <div class="card mb-4">
        <div class="card-header">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Alerts</h5>
            <a [routerLink]="['/customer/alerts']" class="btn btn-sm btn-outline-light">View All</a>
          </div>
        </div>
        <div class="card-body">
          <div class="text-center py-4" *ngIf="isLoadingAlerts">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>

          <div class="empty-state-small" *ngIf="!isLoadingAlerts && (!alertsCount || alertsCount === 0)">
            <svg width="60" height="60" viewBox="0 0 60 60" fill="none">
              <path d="M30 10L35 25H45L37 32L40 47L30 40L20 47L23 32L15 25H25L30 10Z" stroke="#e0e0e0" stroke-width="2"/>
            </svg>
            <p class="mt-2">No alerts</p>
          </div>

          <div class="alerts-list" *ngIf="!isLoadingAlerts && alertsCount && alertsCount > 0">
            <div class="alert-item" *ngFor="let alert of transactionAlerts.slice(0, 3)">
              <div class="alert-icon">
                <span class="badge" [ngClass]="getSeverityClass(alert.severity)">!</span>
              </div>
              <div class="alert-content">
                <div class="alert-title">{{ alert.title || 'Transaction Alert' }}</div>
                <div class="alert-message">{{ alert.message || 'Requires attention' }}</div>
                <div class="alert-date">{{ formatDate(alert.createdAt) }}</div>
              </div>
            </div>
            <div class="text-center mt-2" *ngIf="alertsCount > 3">
              <small class="text-muted">+{{ alertsCount - 3 }} more alerts</small>
            </div>
          </div>
        </div>
      </div>

      <!-- My Accounts Card -->
      <div class="card" *ngIf="accounts.length > 0">
        <div class="card-header">
          <h5 class="mb-0">My Accounts</h5>
        </div>
        <div class="card-body p-0">
          <div class="account-list">
            <div class="account-item" *ngFor="let acc of accounts | slice:0:5">
              <div class="account-info">
                <div class="account-number">{{ acc.accountNumber }}</div>
                <div class="account-type">{{ acc.accountType }}</div>
              </div>
              <div class="account-balance">
                <div class="balance-amount">{{ acc.balance }}</div>
                <div class="balance-currency">{{ acc.currency }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
